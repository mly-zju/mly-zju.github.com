<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="//css/pygments.css">
	<script type="text/javascript" src="//js/jquery.js"></script>
	<title>jQuery插件编写</title>
	<style>
	*{margin:0;padding:0;}
	body{background:url("//img/bg_article.jpg") fixed;background-size:cover;
		width:100%;min-height:400px;font-family:"微软雅黑";color:white;margin:0;padding:0;}
	.cover{background:black;width:100%;height:100%;position:fixed;z-index:-1;opacity:0.6;top:0;left:0;}
	.nav{height:40px;width:100%;overflow:hidden;font-size:18px;position:fixed;top:0;z-index:1;
		background-color:rgb(10,36,65);opacity:0.9;}
	.nav .name{float:left;margin-left:40px;color:white;line-height:40px;opacity:0;}
	.nav ul{list-style:none;}
	.nav li{float:right;margin-right:30px;}
	.nav li a{display:block;width:60px;height:40px;line-height:40px;text-align:center;color:white;text-decoration:none;}
	.left{height:100%;width:15%;margin-left:5%;margin-top:42px;float:left;background-color:red;
		padding:20px 1px;background-color:rgb(43,50,61);opacity:0.92;}
	.left h3{text-align:center;margin-bottom:5px;}
	.left li{margin-left:30px;}
	.left li a{text-decoration:none;color:white;font-size:14px;}
	.right{height:100%;width:65%;margin-left:1%;margin-top:42px;
		float:left;overflow:hidden;padding:20px 40px;background-color:rgb(39,46,57);opacity:0.92;}
	.publish_title{text-align:center;margin-bottom:10px;}
	.publish_date{text-align:center;margin-bottom:15px;}
	.right p{margin-top:8px;font-size:16px;font-family:"宋体";font-size:14px;line-height:20px;}
    .right a{color:#EEC900;}
	.right a.previous{text-decoration:none;color:white;float:right;font-size:14px;margin-top:15px;}
	.right a.next{text-decoration:none;color:white;float:left;font-size:14px;margin-top:15px;}
	.foot{width:100%;height:120px;text-align:center;background-color:rgb(10,36,65);opacity:0.9;
		padding-top:20px;float:left;}
	.foot a{display:block;text-decoration:none;color:white;font-size:14px;margin-top:10px;}
	.foot p{margin:40px auto 0;color:white;font-size:14px;}
	img{margin:10px auto;}
	.code{background:rgb(0,0,0);padding:5px 0 5px 5px;margin:5px 0;}
	a{color:blue;}
	</style>
</head>
<body>
	<div class="cover"></div>
	<div class="nav">
		<div class="name">马龄阳的部落格</div>
		<ul>
			<li><a href="//self_intro.html">关于我</a></li>
			<li><a href="//article_list.html">分类</a></li>
			<li><a href="//index.html">主页</a></li>
		</ul>
	</div>
	<div class="left">
		<h3>文章分类</h3>
		<ul>
		
			
				<li><p><a href="//category/diary.html" style="text-decoration:none;color:white">
					日记随笔(3)</a></p></li>
			
		
			
				<li><p><a href="//category/front_end.html" style="text-decoration:none;color:white">
					前端开发(10)</a></p></li>
			
		
			
				<li><p><a href="//category/python.html" style="text-decoration:none;color:white">
					python(1)</a></p></li>
			
		
			
				<li><p><a href="//category/back_end.html" style="text-decoration:none;color:white">
					后端开发(2)</a></p></li>
			
		
			
				<li><p><a href="//category/network.html" style="text-decoration:none;color:white">
					网络通信(1)</a></p></li>
			
		
			
				<li><p><a href="//category/javascript.html" style="text-decoration:none;color:white">
					javascript(2)</a></p></li>
			
		
		</ul>
	</div>
	<div class="right">
		<h2 class="publish_title">jQuery插件编写</h2>
		<h4 class="publish_date">25 January 2016</h4>
		<p>最近工作当中需要写一个简单的jquery插件。之前看过一些jquery插件的写法，但是有些模糊，正好乘此机会搞明白了jquery插件的原理，在此记录一下。为了搞清楚这个概念，需要整体了解js的面向对象，以及jquery对于js面向对象的封装。</p>
<!--more-->
<p>首先推荐看这一篇，把jquery插件的写法讲的比较清楚：<a href="http://www.cnblogs.com/joey0210/p/3408349.html">如何写jquery插件</a>，或者廖雪峰老师的教程中也有一章专门讲到如何写jquery插件：<a href="http://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000/0014356468967974219593d94f64d06b370c87fc38eade4000">jquery扩展</a>，虽然两篇文章讲到的具体方法稍有差别，但也不过是茴字的两种写法而已，个人倾向于遵照前一篇的方法写。</p>
<p>总结起来，学会写插件，要明白以下这个关键知识点：</p>
<p>区分$.extend和$.fn.extend。$.extend是用于扩展jQuery本身。注意一点：jQuery是一个构造函数，同时也是一个对象（因为在js中函数也是一个对象），$.extned就是给jQuery这个对象增加新的方法。而$.fn.extend中，其实$.fn就是$.prototype的别称，因此$.fn.extend其实就是给jQuery的原型增添新的方法，这样的话当调用$('selector')以后获得的对象就可以继承$.fn.extend中增加的新方法了。</p>
<p>为了区分这两个概念，我这里写一段代码来类比。</p>
<div class="code">
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">jq</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="o">=</span><span class="s1">'hello'</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">jq</span><span class="p">.</span><span class="nx">hello1</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'hello1'</span><span class="p">);</span>
<span class="p">}</span>
<span class="nx">jq</span><span class="p">.</span><span class="nx">hello1</span><span class="p">();</span>        <span class="c1">//hello1</span>
<span class="nx">jq</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hello2</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'hello2'</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">jqObj</span><span class="o">=</span><span class="k">new</span> <span class="nx">jq</span><span class="p">();</span>
<span class="nx">jqObj</span><span class="p">.</span><span class="nx">hello2</span><span class="p">();</span>     <span class="c1">//hello2</span>
<span class="nx">jqObj</span><span class="p">.</span><span class="nx">hello1</span><span class="p">();</span>     <span class="c1">//TypeError: jqObj.hello1 is not a function.</span></code></pre></figure>
</div>
<p>这里jq就姑且代表jQuery，jq.hello1是给jq绑定一个hello1方法，类似jquery中的$.extend()。这时候绑定之后就可以直接调用jq.hello1()了，类似jquery中使用$.ajax()等方法。而之后jq.prototype.hello2就是给jq的原型绑定一个hello2方法，类似jquery中的$.fn.extend()，这时候当使用jqObj=new jq()之后就可以继承hello2方法，类似jquery中使用$('selector')得到对象，可以继承$.fn.extend()绑定的方法。而直接用$.extend()绑定的方法则不会被继承，也就是说jqObj.hello1()会提示错误。</p>
<p>这里的一个要点就是理解jQuery这个对象本身是一个对象，也同时是一个构造函数。这就是js中一切皆对象的原理。</p>
<p>而关于jquery中对于js继承的封装，可以查看这两篇文章比对着看：<a href="http://www.cnblogs.com/aaronjs/p/3278578.html">jQuery源码分析-整体架构</a>和<a href="http://www.jb51.net/article/29187.htm">jQuery中创建实例与原型继承揭秘</a></p>

		
		<a class="next" href="//javascript/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/2016/01/25/js-obj.html">上一篇</a>
		
		
		<a class="previous" href="//%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/2016/01/20/cache.html">下一篇</a>
		
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/javascript/2016/01/25/jquery" data-title="jQuery插件编写" data-url="http://mly-zju.github.io//%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/javascript/2016/01/25/jquery.html"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	function footdisplay(){
		// var foot=$(".foot");
		// var height=$(document).height();
		var right=$(".right");
		var img=$("img");
		// foot.css({"top":height+"px"});
		img.each(function(index,t){
		if(t.width()>right.width())
			t.css({"width":"100%"});
		});
	}
	var duoshuoQuery = {short_name:"mly-zju"};
	function judge(){
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	}
	judge();
	footdisplay();
	</script>
	<!-- 多说公共JS代码 end -->
	</div>
	<div class="foot">
		<a href="javascript:void(0)">Designed By 马龄阳</a>
		<a href="//self_intro.html">@联系方式</a> 
	</div>
</body>
</html>
